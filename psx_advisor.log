2025-07-29 04:05:20,548 - __main__ - WARNING - Failed to setup advanced logging: [Errno 2] No such file or directory: 'D:\\webscrapping\\Stock\\logs\\psx_advisor.log'
2025-07-29 04:05:20,549 - psx_ai_advisor.technical_analysis - INFO - TechnicalAnalyzer initialized
2025-07-29 04:05:20,550 - psx_ai_advisor.technical_analysis - INFO - TechnicalAnalyzer initialized
2025-07-29 04:05:20,550 - psx_ai_advisor.ml_predictor - INFO - MLPredictor initialized with RandomForest model
2025-07-29 04:05:20,550 - __main__ - INFO - PSX AI Advisor initialized
2025-07-29 04:05:21,460 - psx_ai_advisor.data_acquisition - WARNING - Attempt 1 failed: 404 Client Error: Not Found for url: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv. Retrying in 2 seconds...
2025-07-29 04:05:24,664 - psx_ai_advisor.data_acquisition - WARNING - Attempt 2 failed: 404 Client Error: Not Found for url: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv. Retrying in 4 seconds...
2025-07-29 04:05:29,521 - psx_ai_advisor.data_acquisition - ERROR - All 3 attempts failed
2025-07-29 04:05:29,522 - psx_ai_advisor.data_acquisition - ERROR - Error getting stock data: Unexpected error downloading CSV: Network operation failed after 3 attempts: 404 Client Error: Not Found for url: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv
2025-07-29 04:05:29,524 - __main__ - ERROR - Daily analysis failed: Data acquisition failed: Unexpected error downloading CSV: Network operation failed after 3 attempts: 404 Client Error: Not Found for url: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv
2025-07-29 04:05:29,535 - __main__ - ERROR - Traceback (most recent call last):
  File "D:\webscrapping\Stock\psx_ai_advisor\data_acquisition.py", line 194, in download_daily_csv
    self._retry_with_backoff(self._download_file, csv_url, local_path)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\webscrapping\Stock\psx_ai_advisor\data_acquisition.py", line 122, in _retry_with_backoff
    raise NetworkError(f"Network operation failed after {self.retry_attempts} attempts: {last_exception}")
psx_ai_advisor.data_acquisition.NetworkError: Network operation failed after 3 attempts: 404 Client Error: Not Found for url: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\webscrapping\Stock\main.py", line 212, in _acquire_stock_data
    stock_data = self.data_acquisition.get_all_stock_data(date)
  File "D:\webscrapping\Stock\psx_ai_advisor\data_acquisition.py", line 477, in get_all_stock_data
    file_path = self.download_daily_csv(date)
  File "D:\webscrapping\Stock\psx_ai_advisor\data_acquisition.py", line 206, in download_daily_csv
    raise CSVDownloadError(f"Unexpected error downloading CSV: {e}")
psx_ai_advisor.data_acquisition.CSVDownloadError: Unexpected error downloading CSV: Network operation failed after 3 attempts: 404 Client Error: Not Found for url: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\webscrapping\Stock\main.py", line 128, in run_daily_analysis
    stock_data = self._acquire_stock_data(date)
  File "D:\webscrapping\Stock\main.py", line 237, in _acquire_stock_data
    raise PSXAdvisorError(f"Data acquisition failed: {e}")
PSXAdvisorError: Data acquisition failed: Unexpected error downloading CSV: Network operation failed after 3 attempts: 404 Client Error: Not Found for url: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv

2025-07-29 04:06:13,545 - main - WARNING - Failed to setup advanced logging: [Errno 2] No such file or directory: 'D:\\webscrapping\\Stock\\logs\\psx_advisor.log'
2025-07-29 04:06:13,546 - psx_ai_advisor.technical_analysis - INFO - TechnicalAnalyzer initialized
2025-07-29 04:06:13,547 - psx_ai_advisor.technical_analysis - INFO - TechnicalAnalyzer initialized
2025-07-29 04:06:13,547 - psx_ai_advisor.ml_predictor - INFO - MLPredictor initialized with RandomForest model
2025-07-29 04:06:13,548 - main - INFO - PSX AI Advisor initialized
2025-07-29 04:06:13,602 - psx_ai_advisor.data_storage - ERROR - Error reading existing data for PTC: Cannot compare tz-naive and tz-aware timestamps
2025-07-29 04:06:13,603 - psx_ai_advisor.data_storage - INFO - Backed up corrupted file to: backups\PTC_corrupted_20250729_040613.csv
2025-07-29 04:06:13,607 - psx_ai_advisor.data_storage - INFO - Successfully saved 1 records for PTC to data\PTC.csv
2025-07-29 04:06:13,623 - psx_ai_advisor.data_storage - ERROR - Error validating data integrity for PTC: Cannot compare tz-naive and tz-aware timestamps
2025-07-29 04:06:34,756 - main - WARNING - Failed to setup advanced logging: [Errno 2] No such file or directory: 'D:\\webscrapping\\Stock\\logs\\psx_advisor.log'
2025-07-29 04:06:34,757 - psx_ai_advisor.technical_analysis - INFO - TechnicalAnalyzer initialized
2025-07-29 04:06:34,757 - psx_ai_advisor.technical_analysis - INFO - TechnicalAnalyzer initialized
2025-07-29 04:06:34,757 - psx_ai_advisor.ml_predictor - INFO - MLPredictor initialized with RandomForest model
2025-07-29 04:06:34,758 - main - INFO - PSX AI Advisor initialized
2025-07-29 04:06:34,790 - psx_ai_advisor.data_storage - ERROR - Error reading existing data for PTC: Cannot compare tz-naive and tz-aware timestamps
2025-07-29 04:06:34,791 - psx_ai_advisor.data_storage - INFO - Backed up corrupted file to: backups\PTC_corrupted_20250729_040634.csv
2025-07-29 04:06:34,796 - psx_ai_advisor.data_storage - INFO - Successfully saved 1 records for PTC to data\PTC.csv
2025-07-29 04:06:34,814 - psx_ai_advisor.data_storage - INFO - Loaded 1 records for PTC from data\PTC.csv
2025-07-29 04:06:34,814 - psx_ai_advisor.technical_analysis - INFO - Calculating comprehensive technical indicators...
2025-07-29 04:06:34,815 - psx_ai_advisor.technical_analysis - INFO - Calculating RSI...
2025-07-29 04:06:34,816 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for RSI calculation. Need 15 points, got 1
2025-07-29 04:06:34,817 - psx_ai_advisor.technical_analysis - INFO - Calculating MACD...
2025-07-29 04:06:34,817 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for MACD calculation. Need 35 points, got 1
2025-07-29 04:06:34,819 - psx_ai_advisor.technical_analysis - INFO - Calculating Price Rate of Change...
2025-07-29 04:06:34,820 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for ROC calculation. Need 13 points, got 1
2025-07-29 04:06:34,820 - psx_ai_advisor.technical_analysis - INFO - Calculating Moving Averages...
2025-07-29 04:06:34,821 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for SMA calculation. Need 20 points, got 1
2025-07-29 04:06:34,822 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for SMA calculation. Need 50 points, got 1
2025-07-29 04:06:34,823 - psx_ai_advisor.technical_analysis - INFO - Calculating Bollinger Bands...
2025-07-29 04:06:34,823 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for Bollinger Bands. Need 20 points, got 1
2025-07-29 04:06:34,825 - psx_ai_advisor.technical_analysis - INFO - Calculating Volume indicators...
2025-07-29 04:06:34,826 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for SMA calculation. Need 20 points, got 1
2025-07-29 04:06:34,827 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for OBV calculation. Need at least 2 points
2025-07-29 04:06:34,828 - psx_ai_advisor.technical_analysis - INFO - Calculating return features...
2025-07-29 04:06:34,830 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for 1-day returns
2025-07-29 04:06:34,831 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for 2-day returns
2025-07-29 04:06:34,833 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for 5-day returns
2025-07-29 04:06:34,834 - psx_ai_advisor.technical_analysis - INFO - Calculating rolling volatility...
2025-07-29 04:06:34,835 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for volatility calculation. Need 21 points, got 1
2025-07-29 04:06:34,835 - psx_ai_advisor.technical_analysis - INFO - Successfully added 16 technical indicators: RSI_14, MACD, MACD_Signal, MACD_Histogram, ROC_12, SMA_20, SMA_50, BB_Upper, BB_Middle, BB_Lower, Volume_MA_20, OBV, Return_1d, Return_2d, Return_5d, Volatility_20d
2025-07-29 04:06:34,837 - psx_ai_advisor.ml_predictor - INFO - Generating prediction for PTC
2025-07-29 04:06:34,837 - psx_ai_advisor.ml_predictor - INFO - No existing model found for PTC, training new model...
2025-07-29 04:06:34,838 - psx_ai_advisor.ml_predictor - INFO - Starting model training for PTC
2025-07-29 04:06:34,841 - psx_ai_advisor.data_storage - INFO - Loaded 1 records for PTC from data\PTC.csv
2025-07-29 04:06:34,841 - psx_ai_advisor.ml_predictor - INFO - Data sorted by date for time-series aware splitting
2025-07-29 04:06:34,842 - psx_ai_advisor.ml_predictor - INFO - Missing technical indicators, calculating them...
2025-07-29 04:06:34,843 - psx_ai_advisor.technical_analysis - INFO - Calculating comprehensive technical indicators...
2025-07-29 04:06:34,843 - psx_ai_advisor.technical_analysis - INFO - Calculating RSI...
2025-07-29 04:06:34,844 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for RSI calculation. Need 15 points, got 1
2025-07-29 04:06:34,845 - psx_ai_advisor.technical_analysis - INFO - Calculating MACD...
2025-07-29 04:06:34,845 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for MACD calculation. Need 35 points, got 1
2025-07-29 04:06:34,848 - psx_ai_advisor.technical_analysis - INFO - Calculating Price Rate of Change...
2025-07-29 04:06:34,848 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for ROC calculation. Need 13 points, got 1
2025-07-29 04:06:34,850 - psx_ai_advisor.technical_analysis - INFO - Calculating Moving Averages...
2025-07-29 04:06:34,850 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for SMA calculation. Need 20 points, got 1
2025-07-29 04:06:34,851 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for SMA calculation. Need 50 points, got 1
2025-07-29 04:06:34,852 - psx_ai_advisor.technical_analysis - INFO - Calculating Bollinger Bands...
2025-07-29 04:06:34,852 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for Bollinger Bands. Need 20 points, got 1
2025-07-29 04:06:34,854 - psx_ai_advisor.technical_analysis - INFO - Calculating Volume indicators...
2025-07-29 04:06:34,854 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for SMA calculation. Need 20 points, got 1
2025-07-29 04:06:34,855 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for OBV calculation. Need at least 2 points
2025-07-29 04:06:34,856 - psx_ai_advisor.technical_analysis - INFO - Calculating return features...
2025-07-29 04:06:34,857 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for 1-day returns
2025-07-29 04:06:34,858 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for 2-day returns
2025-07-29 04:06:34,858 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for 5-day returns
2025-07-29 04:06:34,860 - psx_ai_advisor.technical_analysis - INFO - Calculating rolling volatility...
2025-07-29 04:06:34,860 - psx_ai_advisor.technical_analysis - WARNING - Insufficient data for volatility calculation. Need 21 points, got 1
2025-07-29 04:06:34,861 - psx_ai_advisor.technical_analysis - INFO - Successfully added 16 technical indicators: RSI_14, MACD, MACD_Signal, MACD_Histogram, ROC_12, SMA_20, SMA_50, BB_Upper, BB_Middle, BB_Lower, Volume_MA_20, OBV, Return_1d, Return_2d, Return_5d, Volatility_20d
2025-07-29 04:07:22,303 - main - WARNING - Failed to setup advanced logging: [Errno 2] No such file or directory: 'D:\\webscrapping\\Stock\\logs\\psx_advisor.log'
2025-07-29 04:07:22,304 - psx_ai_advisor.technical_analysis - INFO - TechnicalAnalyzer initialized
2025-07-29 04:07:22,305 - psx_ai_advisor.technical_analysis - INFO - TechnicalAnalyzer initialized
2025-07-29 04:07:22,306 - psx_ai_advisor.ml_predictor - INFO - MLPredictor initialized with RandomForest model
2025-07-29 04:07:22,307 - main - INFO - PSX AI Advisor initialized
2025-07-29 04:07:22,357 - psx_ai_advisor.data_storage - INFO - Removed 1 duplicate entries
2025-07-29 04:07:22,358 - psx_ai_advisor.data_storage - INFO - Appending 2479 new records to existing 1 records for PTC
2025-07-29 04:07:22,396 - psx_ai_advisor.data_storage - INFO - Successfully saved 2479 records for PTC to data\PTC.csv
2025-07-29 04:07:22,430 - psx_ai_advisor.data_storage - WARNING - Very old data found for PTC: 2016-01-01 00:00:00
2025-07-29 04:07:22,444 - psx_ai_advisor.data_storage - INFO - Loaded 2479 records for PTC from data\PTC.csv
2025-07-29 04:07:22,445 - psx_ai_advisor.technical_analysis - INFO - Calculating comprehensive technical indicators...
2025-07-29 04:07:22,446 - psx_ai_advisor.technical_analysis - INFO - Calculating RSI...
2025-07-29 04:07:22,449 - psx_ai_advisor.technical_analysis - INFO - Calculating MACD...
2025-07-29 04:07:22,454 - psx_ai_advisor.technical_analysis - INFO - Calculating Price Rate of Change...
2025-07-29 04:07:22,456 - psx_ai_advisor.technical_analysis - INFO - Calculating Moving Averages...
2025-07-29 04:07:22,458 - psx_ai_advisor.technical_analysis - INFO - Calculating Bollinger Bands...
2025-07-29 04:07:22,461 - psx_ai_advisor.technical_analysis - INFO - Calculating Volume indicators...
2025-07-29 04:07:22,579 - psx_ai_advisor.technical_analysis - INFO - Calculating return features...
2025-07-29 04:07:22,582 - psx_ai_advisor.technical_analysis - INFO - Calculating rolling volatility...
2025-07-29 04:07:22,583 - psx_ai_advisor.technical_analysis - INFO - Successfully added 16 technical indicators: RSI_14, MACD, MACD_Signal, MACD_Histogram, ROC_12, SMA_20, SMA_50, BB_Upper, BB_Middle, BB_Lower, Volume_MA_20, OBV, Return_1d, Return_2d, Return_5d, Volatility_20d
2025-07-29 04:07:22,585 - psx_ai_advisor.ml_predictor - INFO - Generating prediction for PTC
2025-07-29 04:07:22,585 - psx_ai_advisor.ml_predictor - INFO - No existing model found for PTC, training new model...
2025-07-29 04:07:22,586 - psx_ai_advisor.ml_predictor - INFO - Starting model training for PTC
2025-07-29 04:07:22,598 - psx_ai_advisor.data_storage - INFO - Loaded 2479 records for PTC from data\PTC.csv
2025-07-29 04:07:22,599 - psx_ai_advisor.ml_predictor - INFO - Data sorted by date for time-series aware splitting
2025-07-29 04:07:22,599 - psx_ai_advisor.ml_predictor - INFO - Missing technical indicators, calculating them...
2025-07-29 04:07:22,600 - psx_ai_advisor.technical_analysis - INFO - Calculating comprehensive technical indicators...
2025-07-29 04:07:22,600 - psx_ai_advisor.technical_analysis - INFO - Calculating RSI...
2025-07-29 04:07:22,602 - psx_ai_advisor.technical_analysis - INFO - Calculating MACD...
2025-07-29 04:07:22,606 - psx_ai_advisor.technical_analysis - INFO - Calculating Price Rate of Change...
2025-07-29 04:07:22,608 - psx_ai_advisor.technical_analysis - INFO - Calculating Moving Averages...
2025-07-29 04:07:22,609 - psx_ai_advisor.technical_analysis - INFO - Calculating Bollinger Bands...
2025-07-29 04:07:22,612 - psx_ai_advisor.technical_analysis - INFO - Calculating Volume indicators...
2025-07-29 04:07:22,729 - psx_ai_advisor.technical_analysis - INFO - Calculating return features...
2025-07-29 04:07:22,732 - psx_ai_advisor.technical_analysis - INFO - Calculating rolling volatility...
2025-07-29 04:07:22,733 - psx_ai_advisor.technical_analysis - INFO - Successfully added 16 technical indicators: RSI_14, MACD, MACD_Signal, MACD_Histogram, ROC_12, SMA_20, SMA_50, BB_Upper, BB_Middle, BB_Lower, Volume_MA_20, OBV, Return_1d, Return_2d, Return_5d, Volatility_20d
2025-07-29 04:07:22,737 - psx_ai_advisor.ml_predictor - WARNING - NaN values found in features, applying forward fill
2025-07-29 04:07:22,739 - psx_ai_advisor.ml_predictor - INFO - Prepared features: 2478 samples, 16 features
2025-07-29 04:07:22,740 - psx_ai_advisor.ml_predictor - INFO - Target distribution - UP: 1009, DOWN: 1469
2025-07-29 04:07:22,741 - psx_ai_advisor.ml_predictor - INFO - TimeSeriesSplit - Training samples: 2065, Test samples: 413
2025-07-29 04:07:22,741 - psx_ai_advisor.ml_predictor - INFO - Training period: indices 0-2064, Test period: indices 2065-2477
2025-07-29 04:07:24,969 - psx_ai_advisor.ml_predictor - INFO - Time-series CV completed: Mean accuracy = 0.5501 ± 0.0284
2025-07-29 04:07:24,993 - psx_ai_advisor.ml_predictor - INFO - Model training completed for PTC
2025-07-29 04:07:24,993 - psx_ai_advisor.ml_predictor - INFO - Final test accuracy: 0.5569, Precision: 0.5521, Recall: 0.5569
2025-07-29 04:07:24,994 - psx_ai_advisor.ml_predictor - INFO - CV Mean accuracy: 0.5501 ± 0.0284
2025-07-29 04:07:24,994 - psx_ai_advisor.ml_predictor - INFO - Top features: ['Return_2d', 'OBV', 'Return_1d', 'ROC_12', 'Return_5d']
2025-07-29 04:07:24,995 - psx_ai_advisor.ml_predictor - INFO - Time-series aware cross-validation completed - no lookahead bias
2025-07-29 04:07:24,996 - psx_ai_advisor.ml_predictor - INFO - Model training completed for PTC
2025-07-29 04:07:25,013 - psx_ai_advisor.data_storage - INFO - Loaded 2479 records for PTC from data\PTC.csv
2025-07-29 04:07:25,014 - psx_ai_advisor.technical_analysis - INFO - Calculating comprehensive technical indicators...
2025-07-29 04:07:25,015 - psx_ai_advisor.technical_analysis - INFO - Calculating RSI...
2025-07-29 04:07:25,017 - psx_ai_advisor.technical_analysis - INFO - Calculating MACD...
2025-07-29 04:07:25,021 - psx_ai_advisor.technical_analysis - INFO - Calculating Price Rate of Change...
2025-07-29 04:07:25,023 - psx_ai_advisor.technical_analysis - INFO - Calculating Moving Averages...
2025-07-29 04:07:25,025 - psx_ai_advisor.technical_analysis - INFO - Calculating Bollinger Bands...
2025-07-29 04:07:25,028 - psx_ai_advisor.technical_analysis - INFO - Calculating Volume indicators...
2025-07-29 04:07:25,175 - psx_ai_advisor.technical_analysis - INFO - Calculating return features...
2025-07-29 04:07:25,179 - psx_ai_advisor.technical_analysis - INFO - Calculating rolling volatility...
2025-07-29 04:07:25,180 - psx_ai_advisor.technical_analysis - INFO - Successfully added 16 technical indicators: RSI_14, MACD, MACD_Signal, MACD_Histogram, ROC_12, SMA_20, SMA_50, BB_Upper, BB_Middle, BB_Lower, Volume_MA_20, OBV, Return_1d, Return_2d, Return_5d, Volatility_20d
2025-07-29 04:07:25,248 - psx_ai_advisor.ml_predictor - WARNING - Could not calculate recent accuracy for PTC: Insufficient data for training. Need 200 samples, got 30
2025-07-29 04:07:25,249 - psx_ai_advisor.ml_predictor - INFO - Prediction for PTC: DOWN (confidence: 0.6977)
2025-07-29 04:07:25,266 - psx_ai_advisor.data_storage - INFO - Loaded 2479 records for PTC from data\PTC.csv
2025-07-29 04:07:25,292 - psx_ai_advisor.data_storage - INFO - Removed 1 duplicate entries
2025-07-29 04:07:25,294 - psx_ai_advisor.data_storage - INFO - Appending 1 new records to existing 2479 records for PTC
2025-07-29 04:07:25,383 - psx_ai_advisor.data_storage - INFO - Successfully saved 2479 records for PTC to data\PTC.csv
2025-07-29 04:07:25,411 - psx_ai_advisor.data_storage - WARNING - Very old data found for PTC: 2016-01-01 00:00:00
2025-07-29 04:07:25,427 - psx_ai_advisor.data_storage - INFO - Loaded 2479 records for PTC from data\PTC.csv
2025-07-29 04:07:25,428 - psx_ai_advisor.technical_analysis - INFO - Calculating comprehensive technical indicators...
2025-07-29 04:07:25,428 - psx_ai_advisor.technical_analysis - INFO - Calculating RSI...
2025-07-29 04:07:25,431 - psx_ai_advisor.technical_analysis - INFO - Calculating MACD...
2025-07-29 04:07:25,435 - psx_ai_advisor.technical_analysis - INFO - Calculating Price Rate of Change...
2025-07-29 04:07:25,437 - psx_ai_advisor.technical_analysis - INFO - Calculating Moving Averages...
2025-07-29 04:07:25,439 - psx_ai_advisor.technical_analysis - INFO - Calculating Bollinger Bands...
2025-07-29 04:07:25,443 - psx_ai_advisor.technical_analysis - INFO - Calculating Volume indicators...
2025-07-29 04:07:25,567 - psx_ai_advisor.technical_analysis - INFO - Calculating return features...
2025-07-29 04:07:25,572 - psx_ai_advisor.technical_analysis - INFO - Calculating rolling volatility...
2025-07-29 04:07:25,573 - psx_ai_advisor.technical_analysis - INFO - Successfully added 16 technical indicators: RSI_14, MACD, MACD_Signal, MACD_Histogram, ROC_12, SMA_20, SMA_50, BB_Upper, BB_Middle, BB_Lower, Volume_MA_20, OBV, Return_1d, Return_2d, Return_5d, Volatility_20d
2025-07-29 04:07:25,574 - psx_ai_advisor.ml_predictor - INFO - Generating prediction for PTC
2025-07-29 04:07:25,585 - psx_ai_advisor.data_storage - INFO - Loaded 2479 records for PTC from data\PTC.csv
2025-07-29 04:07:25,586 - psx_ai_advisor.technical_analysis - INFO - Calculating comprehensive technical indicators...
2025-07-29 04:07:25,587 - psx_ai_advisor.technical_analysis - INFO - Calculating RSI...
2025-07-29 04:07:25,589 - psx_ai_advisor.technical_analysis - INFO - Calculating MACD...
2025-07-29 04:07:25,592 - psx_ai_advisor.technical_analysis - INFO - Calculating Price Rate of Change...
2025-07-29 04:07:25,593 - psx_ai_advisor.technical_analysis - INFO - Calculating Moving Averages...
2025-07-29 04:07:25,594 - psx_ai_advisor.technical_analysis - INFO - Calculating Bollinger Bands...
2025-07-29 04:07:25,597 - psx_ai_advisor.technical_analysis - INFO - Calculating Volume indicators...
2025-07-29 04:07:25,727 - psx_ai_advisor.technical_analysis - INFO - Calculating return features...
2025-07-29 04:07:25,730 - psx_ai_advisor.technical_analysis - INFO - Calculating rolling volatility...
2025-07-29 04:07:25,731 - psx_ai_advisor.technical_analysis - INFO - Successfully added 16 technical indicators: RSI_14, MACD, MACD_Signal, MACD_Histogram, ROC_12, SMA_20, SMA_50, BB_Upper, BB_Middle, BB_Lower, Volume_MA_20, OBV, Return_1d, Return_2d, Return_5d, Volatility_20d
2025-07-29 04:07:25,793 - psx_ai_advisor.ml_predictor - WARNING - Could not calculate recent accuracy for PTC: Insufficient data for training. Need 200 samples, got 30
2025-07-29 04:07:25,794 - psx_ai_advisor.ml_predictor - INFO - Prediction for PTC: DOWN (confidence: 0.6977)
2025-07-29 14:02:15,184 - main - WARNING - Failed to setup advanced logging: [Errno 2] No such file or directory: 'D:\\webscrapping\\Stock\\logs\\psx_advisor.log'
2025-07-29 14:02:15,185 - psx_ai_advisor.technical_analysis - INFO - TechnicalAnalyzer initialized
2025-07-29 14:02:15,186 - psx_ai_advisor.technical_analysis - INFO - TechnicalAnalyzer initialized
2025-07-29 14:02:15,186 - psx_ai_advisor.ml_predictor - INFO - MLPredictor initialized with RandomForest model
2025-07-29 14:02:15,186 - main - INFO - PSX AI Advisor initialized
2025-07-29 14:02:15,267 - psx_ai_advisor.data_storage - INFO - Removed 2479 duplicate entries
2025-07-29 14:02:15,268 - psx_ai_advisor.data_storage - INFO - Appending 2479 new records to existing 2479 records for PTC
2025-07-29 14:02:15,351 - psx_ai_advisor.data_storage - INFO - Successfully saved 2479 records for PTC to data\PTC.csv
2025-07-29 14:02:15,389 - psx_ai_advisor.data_storage - WARNING - Very old data found for PTC: 2016-01-01 00:00:00
2025-07-29 14:02:15,404 - psx_ai_advisor.data_storage - INFO - Loaded 2479 records for PTC from data\PTC.csv
2025-07-29 14:02:15,404 - psx_ai_advisor.technical_analysis - INFO - Calculating comprehensive technical indicators...
2025-07-29 14:02:15,405 - psx_ai_advisor.technical_analysis - INFO - Calculating RSI...
2025-07-29 14:02:15,409 - psx_ai_advisor.technical_analysis - INFO - Calculating MACD...
2025-07-29 14:02:15,413 - psx_ai_advisor.technical_analysis - INFO - Calculating Price Rate of Change...
2025-07-29 14:02:15,415 - psx_ai_advisor.technical_analysis - INFO - Calculating Moving Averages...
2025-07-29 14:02:15,416 - psx_ai_advisor.technical_analysis - INFO - Calculating Bollinger Bands...
2025-07-29 14:02:15,421 - psx_ai_advisor.technical_analysis - INFO - Calculating Volume indicators...
2025-07-29 14:02:15,544 - psx_ai_advisor.technical_analysis - INFO - Calculating return features...
2025-07-29 14:02:15,548 - psx_ai_advisor.technical_analysis - INFO - Calculating rolling volatility...
2025-07-29 14:02:15,553 - psx_ai_advisor.technical_analysis - INFO - Successfully added 16 technical indicators: RSI_14, MACD, MACD_Signal, MACD_Histogram, ROC_12, SMA_20, SMA_50, BB_Upper, BB_Middle, BB_Lower, Volume_MA_20, OBV, Return_1d, Return_2d, Return_5d, Volatility_20d
2025-07-29 14:02:15,554 - psx_ai_advisor.ml_predictor - INFO - Generating prediction for PTC
2025-07-29 14:02:15,592 - psx_ai_advisor.ml_predictor - INFO - Loaded existing model for PTC
2025-07-29 14:02:15,605 - psx_ai_advisor.data_storage - INFO - Loaded 2479 records for PTC from data\PTC.csv
2025-07-29 14:02:15,606 - psx_ai_advisor.technical_analysis - INFO - Calculating comprehensive technical indicators...
2025-07-29 14:02:15,606 - psx_ai_advisor.technical_analysis - INFO - Calculating RSI...
2025-07-29 14:02:15,608 - psx_ai_advisor.technical_analysis - INFO - Calculating MACD...
2025-07-29 14:02:15,611 - psx_ai_advisor.technical_analysis - INFO - Calculating Price Rate of Change...
2025-07-29 14:02:15,612 - psx_ai_advisor.technical_analysis - INFO - Calculating Moving Averages...
2025-07-29 14:02:15,614 - psx_ai_advisor.technical_analysis - INFO - Calculating Bollinger Bands...
2025-07-29 14:02:15,617 - psx_ai_advisor.technical_analysis - INFO - Calculating Volume indicators...
2025-07-29 14:02:15,738 - psx_ai_advisor.technical_analysis - INFO - Calculating return features...
2025-07-29 14:02:15,742 - psx_ai_advisor.technical_analysis - INFO - Calculating rolling volatility...
2025-07-29 14:02:15,743 - psx_ai_advisor.technical_analysis - INFO - Successfully added 16 technical indicators: RSI_14, MACD, MACD_Signal, MACD_Histogram, ROC_12, SMA_20, SMA_50, BB_Upper, BB_Middle, BB_Lower, Volume_MA_20, OBV, Return_1d, Return_2d, Return_5d, Volatility_20d
2025-07-29 14:02:15,813 - psx_ai_advisor.ml_predictor - WARNING - Could not calculate recent accuracy for PTC: Insufficient data for training. Need 200 samples, got 30
2025-07-29 14:02:15,814 - psx_ai_advisor.ml_predictor - INFO - Prediction for PTC: DOWN (confidence: 0.6977)
2025-07-29 14:02:15,827 - psx_ai_advisor.data_storage - INFO - Loaded 2479 records for PTC from data\PTC.csv
2025-07-29 14:02:15,842 - psx_ai_advisor.data_storage - INFO - Removed 1 duplicate entries
2025-07-29 14:02:15,844 - psx_ai_advisor.data_storage - INFO - Appending 1 new records to existing 2479 records for PTC
2025-07-29 14:02:15,914 - psx_ai_advisor.data_storage - INFO - Successfully saved 2479 records for PTC to data\PTC.csv
2025-07-29 14:02:15,939 - psx_ai_advisor.data_storage - WARNING - Very old data found for PTC: 2016-01-01 00:00:00
2025-07-29 14:02:15,953 - psx_ai_advisor.data_storage - INFO - Loaded 2479 records for PTC from data\PTC.csv
2025-07-29 14:02:15,954 - psx_ai_advisor.technical_analysis - INFO - Calculating comprehensive technical indicators...
2025-07-29 14:02:15,954 - psx_ai_advisor.technical_analysis - INFO - Calculating RSI...
2025-07-29 14:02:15,956 - psx_ai_advisor.technical_analysis - INFO - Calculating MACD...
2025-07-29 14:02:15,959 - psx_ai_advisor.technical_analysis - INFO - Calculating Price Rate of Change...
2025-07-29 14:02:15,960 - psx_ai_advisor.technical_analysis - INFO - Calculating Moving Averages...
2025-07-29 14:02:15,962 - psx_ai_advisor.technical_analysis - INFO - Calculating Bollinger Bands...
2025-07-29 14:02:15,965 - psx_ai_advisor.technical_analysis - INFO - Calculating Volume indicators...
2025-07-29 14:02:16,085 - psx_ai_advisor.technical_analysis - INFO - Calculating return features...
2025-07-29 14:02:16,088 - psx_ai_advisor.technical_analysis - INFO - Calculating rolling volatility...
2025-07-29 14:02:16,089 - psx_ai_advisor.technical_analysis - INFO - Successfully added 16 technical indicators: RSI_14, MACD, MACD_Signal, MACD_Histogram, ROC_12, SMA_20, SMA_50, BB_Upper, BB_Middle, BB_Lower, Volume_MA_20, OBV, Return_1d, Return_2d, Return_5d, Volatility_20d
2025-07-29 14:02:16,090 - psx_ai_advisor.ml_predictor - INFO - Generating prediction for PTC
2025-07-29 14:02:16,103 - psx_ai_advisor.data_storage - INFO - Loaded 2479 records for PTC from data\PTC.csv
2025-07-29 14:02:16,104 - psx_ai_advisor.technical_analysis - INFO - Calculating comprehensive technical indicators...
2025-07-29 14:02:16,105 - psx_ai_advisor.technical_analysis - INFO - Calculating RSI...
2025-07-29 14:02:16,107 - psx_ai_advisor.technical_analysis - INFO - Calculating MACD...
2025-07-29 14:02:16,109 - psx_ai_advisor.technical_analysis - INFO - Calculating Price Rate of Change...
2025-07-29 14:02:16,111 - psx_ai_advisor.technical_analysis - INFO - Calculating Moving Averages...
2025-07-29 14:02:16,112 - psx_ai_advisor.technical_analysis - INFO - Calculating Bollinger Bands...
2025-07-29 14:02:16,115 - psx_ai_advisor.technical_analysis - INFO - Calculating Volume indicators...
2025-07-29 14:02:16,244 - psx_ai_advisor.technical_analysis - INFO - Calculating return features...
2025-07-29 14:02:16,247 - psx_ai_advisor.technical_analysis - INFO - Calculating rolling volatility...
2025-07-29 14:02:16,248 - psx_ai_advisor.technical_analysis - INFO - Successfully added 16 technical indicators: RSI_14, MACD, MACD_Signal, MACD_Histogram, ROC_12, SMA_20, SMA_50, BB_Upper, BB_Middle, BB_Lower, Volume_MA_20, OBV, Return_1d, Return_2d, Return_5d, Volatility_20d
2025-07-29 14:02:16,311 - psx_ai_advisor.ml_predictor - WARNING - Could not calculate recent accuracy for PTC: Insufficient data for training. Need 200 samples, got 30
2025-07-29 14:02:16,312 - psx_ai_advisor.ml_predictor - INFO - Prediction for PTC: DOWN (confidence: 0.6977)
2025-07-29 14:02:43,584 - __main__ - WARNING - Failed to setup advanced logging: [Errno 2] No such file or directory: 'D:\\webscrapping\\Stock\\logs\\psx_advisor.log'
2025-07-29 14:02:43,585 - psx_ai_advisor.technical_analysis - INFO - TechnicalAnalyzer initialized
2025-07-29 14:02:43,585 - psx_ai_advisor.technical_analysis - INFO - TechnicalAnalyzer initialized
2025-07-29 14:02:43,586 - psx_ai_advisor.ml_predictor - INFO - MLPredictor initialized with RandomForest model
2025-07-29 14:02:43,586 - __main__ - INFO - PSX AI Advisor initialized
2025-07-29 14:02:43,587 - __main__ - INFO - ============================================================
2025-07-29 14:02:43,587 - __main__ - INFO - Starting PSX AI Advisor Daily Analysis
2025-07-29 14:02:43,587 - __main__ - INFO - ============================================================
2025-07-29 14:02:43,588 - __main__ - INFO - Step 1: Downloading and parsing stock data...
2025-07-29 14:02:43,588 - __main__ - INFO - Downloading CSV from PSX...
2025-07-29 14:02:43,588 - psx_ai_advisor.data_acquisition - INFO - Downloading from: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv
2025-07-29 14:02:44,739 - psx_ai_advisor.data_acquisition - WARNING - Attempt 1 failed: 404 Client Error: Not Found for url: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv. Retrying in 2 seconds...
2025-07-29 14:02:46,742 - psx_ai_advisor.data_acquisition - INFO - Downloading from: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv
2025-07-29 14:02:48,025 - psx_ai_advisor.data_acquisition - WARNING - Attempt 2 failed: 404 Client Error: Not Found for url: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv. Retrying in 4 seconds...
2025-07-29 14:02:52,027 - psx_ai_advisor.data_acquisition - INFO - Downloading from: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv
2025-07-29 14:02:52,882 - psx_ai_advisor.data_acquisition - ERROR - All 3 attempts failed
2025-07-29 14:02:52,883 - psx_ai_advisor.data_acquisition - ERROR - Error getting stock data: Unexpected error downloading CSV: Network operation failed after 3 attempts: 404 Client Error: Not Found for url: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv
2025-07-29 14:02:52,884 - __main__ - ERROR - Daily analysis failed: Data acquisition failed: Unexpected error downloading CSV: Network operation failed after 3 attempts: 404 Client Error: Not Found for url: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv
2025-07-29 14:02:52,891 - __main__ - ERROR - Traceback (most recent call last):
  File "D:\webscrapping\Stock\psx_ai_advisor\data_acquisition.py", line 194, in download_daily_csv
    self._retry_with_backoff(self._download_file, csv_url, local_path)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\webscrapping\Stock\psx_ai_advisor\data_acquisition.py", line 122, in _retry_with_backoff
    raise NetworkError(f"Network operation failed after {self.retry_attempts} attempts: {last_exception}")
psx_ai_advisor.data_acquisition.NetworkError: Network operation failed after 3 attempts: 404 Client Error: Not Found for url: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\webscrapping\Stock\main.py", line 212, in _acquire_stock_data
    stock_data = self.data_acquisition.get_all_stock_data(date)
  File "D:\webscrapping\Stock\psx_ai_advisor\data_acquisition.py", line 477, in get_all_stock_data
    file_path = self.download_daily_csv(date)
  File "D:\webscrapping\Stock\psx_ai_advisor\data_acquisition.py", line 206, in download_daily_csv
    raise CSVDownloadError(f"Unexpected error downloading CSV: {e}")
psx_ai_advisor.data_acquisition.CSVDownloadError: Unexpected error downloading CSV: Network operation failed after 3 attempts: 404 Client Error: Not Found for url: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\webscrapping\Stock\main.py", line 128, in run_daily_analysis
    stock_data = self._acquire_stock_data(date)
  File "D:\webscrapping\Stock\main.py", line 237, in _acquire_stock_data
    raise PSXAdvisorError(f"Data acquisition failed: {e}")
PSXAdvisorError: Data acquisition failed: Unexpected error downloading CSV: Network operation failed after 3 attempts: 404 Client Error: Not Found for url: https://dps.psx.com.pk/download/closing_rates/2025-07-29.csv

